require "rubygems"
#require "bundler/setup"
require "capybara"
require "capybara/dsl"
require "capybara-webkit"
require "headless"

Capybara.run_server = false
Capybara.current_driver = :webkit
 #""

module Test
  class Google
    include Capybara::DSL
   
    def get_results(site)
        p site
        Headless.ly do
            if site == "hopcoms"
                Capybara.app_host = "http://www.hopcoms.kar.nic.in/"
            	visit('AnalysisReport.aspx')
             	select("January", :from => "ctl00_LC_drop1")
             	select("2014", :from => "ctl00_LC_drop2")
             	select("Amla", :from => "ctl00_LC_drop3")
            	click_button "ctl00_LC_but1"

            	all(:xpath, "//div[@id='ctl00_LC_report']//td").map{ |a| a.text }

            #KMV
            elsif site == "kmv"
                Capybara.app_host = "http://krishimaratavahini.kar.nic.in/" 
                visit('reports/DateWiseReport.aspx')
                item_name = "POTATO"
                select("POTATO", :from => "_ctl0_content5_ddlcommodity")
                select("JANUARY", :from => "_ctl0_content5_ddlmonth")
                select("2014", :from => "_ctl0_content5_ddlyear") 
                #select("AllMarkets", :from => "_ctl0_content5_ddlmarket") #default is all market so not needed
                click_button "_ctl0_content5_viewreport"
                all(:xpath, "//div[@id='divprint']//table/tbody").map{ |a| a.text }
            end
        end
    end
  end
end

spider = Test::Google.new
p "Input kmv or hopcoms"
x = gets
p spider.get_results(x.chomp)



# require "uri"
# require "nokogiri"


# ttried to post using manjurs data : did not work
# uri = URI.parse("http://krishimaratavahini.kar.nic.in")
# http = Net::HTTP.new(uri.host, uri.port)
# request = Net::HTTP::Post.new("/reports/DateWiseReport.aspx")
# request.add_field('Content-Type', 'application/x-www-form-urlencoded\r\n')
# request.body = URI.encode_www_form( {
#                     '_ctl0:content5:ddlmonth' => 1, 
#                     '_ctl0:content5:ddlyear' => 2014,
#                     '_ctl0:content5:ddlcommodity'=> 24,
#                     '_ctl0:content5:ddlmarket:' => 'AllMarkets',
#                     '_ctl0:content5:viewreport'=> 'View Report',
#                     '__VIEWSTATE' => '/wEPDwULLTE2NjY5NjA0NDUPZBYCZg9kFgICAw9kFgYCAw8PFgIeBFRleHQFHUZlYnJ1YXJ5ICAgICAgICAyMiwgICAgICAyMDE0ZGQCBQ9kFgICAQ9kFgpmD2QWAgIBD2QWAgIBDxAPFgYeDkRhdGFWYWx1ZUZpZWxkBQhtb25fY29kZR4NRGF0YVRleHRGaWVsZAUIbW9uX25hbWUeC18hRGF0YUJvdW5kZ2QQFQwKSkFOVUFSWSAgIApGRUJSVUFSWSAgCk1BUkNIICAgICAKQVBSSUwgICAgIApNQVkgICAgICAgCkpVTkUgICAgICAKSlVMWSAgICAgIApBVUdVU1QgICAgClNFUFRFTUJFUiAKT0NUT0JFUiAgIApOT1ZFTUJFUiAgCkRFQ0VNQkVSICAVDAExATIBMwE0ATUBNgE3ATgBOQIxMAIxMQIxMhQrAwxnZ2dnZ2dnZ2dnZ2dkZAIBD2QWAgIBD2QWAgIBDxAPFgYfAgUFRXhwcjEfAQUFRXhwcjEfA2dkEBUNBDIwMDIEMjAwMwQyMDA0BDIwMDUEMjAwNgQyMDA3BDIwMDgEMjAwOQQyMDEwBDIwMTEEMjAxMgQyMDEzBDIwMTQVDQQyMDAyBDIwMDMEMjAwNAQyMDA1BDIwMDYEMjAwNwQyMDA4BDIwMDkEMjAxMAQyMDExBDIwMTIEMjAxMwQyMDE0FCsDDWdnZ2dnZ2dnZ2dnZ2dkZAICD2QWAgIBD2QWAgIBDxAPFgYfAQUJQ29tbV9jb2RlHwIFCUNvbW1vZGl0eR8DZ2QQFYgCBUFKV0FODUFMQVNBTkRFIEdSQU0LQUxBU0FORElLQUkLQUxMIEZMT1dFUlMKQU1BUkFOVEhVUwtBTUJBREEgU0VFRAtBTVBIT1BIQUxVUwZBTkpVUkEIQU5UQVdBTEEFQVBQTEUIQVJFQ0FOVVQFQVJIQVIJQVNIIEdPVVJEBkFTVEVSQQVBVkFSRQhBVkFSRURBTAVCQUpSQQdCQUxFS0FJBkJBTUJPTwZCQU5BTkEMQkFOQU5BIEdSRUVOBkJBUkxFWQVCRUFOUwtCRUFURU4gUklDRQhCRUVUUk9PVA5CRU5HQUwgR1JBTURBTApCRU5HQUxHUkFNDEJFVEFMIExFQVZFUwlCRVRBTE5VVFMGQkhJTkRJCEJJRyBHUkFNB0JJTk9VTEEMQklUVEVSIEdPVVJEDUJMQUNLIEdSQU1EQUwMQkxBQ0sgUEVQUEVSCUJMQUNLR1JBTQlCT1JFSEFOTlUMQk9UVExFIEdPVVJEBEJSQU4HQlJJTkpBTAtCUk9LRU4gUklDRQ9CVUxMIChGT1IgRUFDSCkGQlVMTEFSC0JVTkNIIEJFQU5TBkJVVFRFUgdDQUJCQUdFD0NBTEYgKEZPUiBFQUNIKQRDQU5FCENBUFNJQ1VNCUNBUkRBTU9NUwZDQVJST1QGQ0FTSEVXDUNBU0hFVyBLRVJORUwJQ0FTSEVXTlVUCkNBU1RPUiBPSUwLQ0FTVE9SIFNFRUQLQ0FVTElGTE9XRVIJQ0hBS09PVEhBEENIQVBQQVJBREEgQVZBUkUNQ0hFTk5BTkdJIChXKQxDSEVOTkFOR0lEQUwQQ0hJS09PUyAoU0FQT1RBKQ9DSElMTFkgQ0FQU0lDVU0KQ0hJTExZIFJFRAlDSE9XIENIT1cMQ0lUUlVTIEZSVUlUBkNMT1ZFUw1DTFVTVEVSIEJFQU5TBUNPQ09BEkNPQ09OVVQgKFBFUiAxMDAwKRJDT0NPTlVUIChQRVIgMTAwMCkLQ09DT05VVCBPSUwMQ09DT05VVCBTRUVEBkNPRkZFRQVDT1BSQQlDT1JJQU5ERVIOQ09SSUFOREVSIFNFRUQGQ09UVE9OC0NPVFRPTiBTRUVEDkNPVyAoRk9SIEVBQ0gpBkNPV1BFQQxDT1dQRUEgKFZFRykMQ1JZU0FOVEhBTVVNCENVQ1VNQkFSCkNVTU1JTlNFRUQFREFMREEIREhBSU5DSEEKRFJVTSBTVElDSwxEUlkgQ0hJTExJRVMKRFJZIEdSQVBFUwxEVVNURVIgQkVBTlMJRklFTEQgUEVBCEZJUkVXT09ECkZSSUVEIEdSQU0GR0FSTElDBEdIRUUIR0lOR0VMTFkMR0lOR0VMTFkgT0lMBkdJTkdFUg9HT0FUIChGT1IgRUFDSCkKR1JBTSBGTE9VUgZHUkFQRVMPR1JFRU4gQVZBUkUgKFcpDEdSRUVOIENISUxMWQxHUkVFTiBHSU5HRVINR1JFRU4gR1JBTURBTApHUkVFTiBQRUFTCUdSRUVOR1JBTQlHUk9VTkROVVQNR1JPVU5ETlVUIE9JTA5HUk9VTkROVVQgU0VFRAVHVUFWQQNHVVIHR1VSRUxMVQRHV0FSCUhBUkFMRUtBSRVIRSBCQUZGQUxPIChGT1IgRUFDSCkKSElQUEUgU0VFRAVIT05FWQpIT05HRSBTRUVECkhPUlNFIEdSQU0MSFlCUklEIENVTUJVEElTQUJVTCAoUFNZTExVTSkKSkFDSyBGUlVJVAdKQUdHRVJZCUpBTUFNS0hBTgVKQU1VTgdKQVNNSU5FA0pBVQRKQVZJBUpFRVJBBUpPV0FSBEpVVEUJSlVURSBTRUVEBktBS0FEQQtLQU5BS0FNQkFSQQhLQVJBTUFOSQdLQVJCVUpBC0tIQVJJRiBNQVNICktOT09MIEtIT0wGS1VDSFVSDUxBRElFUyBGSU5HRVIDTEFLEExFQUZZIFZFR0VUQUJMRVMGTEVOVElMDExJTUUgKExFTU9OKQdMSU5TRUVEBUxJTlQgBE1BQ0UKTUFJREEgQVRUQQVNQUlaRQVNQU5HTxBNQU5HTyAoUkFXLVJJUEUpCk1BUkFHRU5BU1UITUFSQVNFQlUITUFSWUdPTEQETUFTSApNQVNVUkkgREFMBk1BVEFLSQVNRVRISQtNRVRISSBTRUVEUwdNSUxMRVRTBU1PQVRICU1PQVRIIERBTAhNT1VTQU1CSQdNVVNUQVJECU1ZUk9CT0xBTgdOQVJHQVNJBk5BVkFORQlORUVNIFNFRUQITkVMTElLQUkMTkVSQUxFIEhBTk5VCk5JR0VSIFNFRUQGTlVUTUVHBU9OSU9OBk9SQU5HRRdPVEhFUiBEUlVHUyAmIE5BUkNPVElDUxVPVEhFUiBGT1JFU1QgUFJPRFVDVFMMT1RIRVIgRlJVSVRTDk9USEVSIE9JTCBTRUVEDE9USEVSIFBVTFNFUwxPVEhFUiBTUElDRVMPT1RIRVIgVkVHRVRBQkxFDU9YIChGT1IgRUFDSCkFUEFERFkGUEFQQVlBCFBFQVMgV0VUDlBFUFBFUiBHQVJCTEVEEVBFUFBFUiBVTi1HQVJCTEVED1BJR1MgKEZPUiBFQUNIKQpQSU5FIEFQUExFB1BPTEhFUkILUE9NQUdSQU5BVEUGUE9UQVRPB1BVTVBLSU4FUFVOREkKUFVOREkgU0VFRAdSQURESVNIBFJBR0kGUkFKR0lSDlJBTSAoRk9SIEVBQ0gpBFJBWUEHUkVER1JBTQhSSUNDQkNBTgRSSUNFClJJREdFR1VBUkQEUk9TRQZSVUJCRVIHU0FCVURBTglTQUZGTE9XRVIFU0FKSkUJU0FNRS9TQVZJB1NBUkFTVU0NU0VBU09OIExFQVZFUwVTRUVHVQ5TRUVNRUJBREFORUtBSQpTRUVUSEFQSEFMB1NFU0FNVU0WU0hFIEJBRkZBTE8gKEZPUiBFQUNIKRNTSEUgR09BVCAoRk9SIEVBQ0gpEFNIRUVQIChGT1IgRUFDSCkHU0lERE9UQQ1TS0lOIEFORCBISURFClNOQUtFR1VBUkQFU09BTkYHU09BUE5VVARTT0pJBVNPTVBVCFNPWUFCRUVOBVNVR0FSCVNVR0FSQ0FORQlTVU5GTE9XRVIOU1VORkxPV0VSIFNFRUQHU1VOSEVNUAVTVVJBTRBTVVZBIChESUxMIFNFRUQpDFNVVkFSTkFHQURERQpTV0VFVCBMSU1FDFNXRUVUIFBPVEFUTw1TV0VFVCBQVU1QS0lOC1QuIFYuIENVTUJVDlRBTUFSSU5EIEZSVUlUDVRBTUFSSU5EIFNFRUQHVEFQSU9DQQhUQVJBTUlSQQNURUEOVEVOREVSIENPQ09OVVQGVEhJTkFJClRIT0dBUklLQUkJVEhPTkRFS0FJBlRIT1JJQQdUT0JBQ0NPBlRPTUFUTwtUVUJFIEZMT1dFUgNUVVIHVFVSIERBTAhUVVJNRVJJQwZWQVJBR1ULV0FURVIgTUVMT04FV0hFQVQKV0hFQVQgQVRUQQ1XSElURSBQVU1QS0lOBFdPT0QDWUFNFYgCAzEzNwMyODEDMTY2AzIyNwI4NgMxMzADMTAyAzIyMQMyMDkCMTcDMTQwAjQ5AjgzAzIzMgI5MQMyNjkCMjgDMjc0AzIwNAIxOQI5MAIyOQI5NAMyNjIDMTU3AzI2MwE2AzE0MwI0MQI4NQMxMTMCNTECODEDMjY0AjM4ATgDMTg5AjgyAzI5MAIzNQMyOTMDMjE0AzI4NAMyMjQDMjcyAzE1NAMyMTUDMjA1AzE2NAI0MAMxNTMDMTMzAzIzOAIzNgMyNzADMTIzAjM0AzE4OAMxNjkDMjQxAzI5NQI3MQI4OAIyNgMxNjcDMjM5AzEwNQI4MAMxMDQDMTM4AjM3AzI2NgMxMTICNDUDMTI5AjQzAzEwOAIxNQI5OQMyMTICOTICODkDMjMxAzE1OQI0MgMyNzMCNjkDMTY4AzEzMgMyNzgDMTYzAjY0AzIwNgMyODkCMjUDMjQ5AzExOAMyNzYCMjcDMjE5AzI5NAIyMgMxNjUCODcDMTAzAzI2NQI1MAE5AjEwAzI2NwMyNjgDMTg1Ajc0AzI3OQI3NQMyNTIDMjE2AzEyNQMyMzYDMTI0AzExNAMxMTkDMjU2AzE4MgMxNTEDMTc1AzE4NAMyMjkDMjUxAzI1MAMyOTIBNQIxNgMyMTADMjMwAzIzMwMxMTUDMTg3AjYxAzE3NwMyNDMDMTU1Ajk2AzE3MQI2MwMxODACNjcDMjgwAzEwNwMyODgBNAIyMAMxNzIDMjI1AzE4MQMyMzUCNjADMjU5AjkzAjQ2AjQ3AzIzNwI5NQMyNTgCNzcCMTIDMTQyAzI0NQMxMjEDMTI2AzIyMwMyMjICOTgDMTA2AjIzAjE4AzE0NAMyMTEDMjAyAzEzMQI5NwMxMzYDMTc5AzIxMwEyAjcyAzE3NAMxMDkDMTEwAzIyMAIyMQMyNDADMTkwAjI0Ajg0AzI1NAMxMjgDMTYxAjMwAzI0OAMyODICNjUBNwI2MgEzAzE2MAMyMjgDMTExAzI5MQI1OQMyNzEDMTIyAzI0NwMyNzcDMjUzAzE3NgMyMDECMTEDMjE3AzI4MwMyMTgDMTgzAzIyNgMxNTYDMTM1AzIwNwMyODYDMjQ2AjEzAjQ4AzE1MAIxNAMyODUDMTM5AzI0MgMyNTUDMTc4AjcwAzE1MgMxNzMDMTIwAzI2MQMyMDgDMTAwAjc2AjQ0AzIwMAMxMTYDMTcwAzE2MgI2NgMxNDECNzgDMjM0AzI3NQMyNjACMzkDMTE3AjczATEDMjg3AzE1OAMyMDMDMjQ0FCsDiAJnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dkZAIDD2QWAgIBD2QWAgIBDxAPFgYfAQULbWFya2V0X2NvZGUfAgULbWFya2V0X25hbWUfA2dkEBWdAQpBbGxNYXJrZXRzCEFOTklHRVJJCEFSU0lLRVJFBkFUSEFOSQVBVVJBRAZCQURBTUkIQkFHQUxLT1QJQkFHRVBBTExJCkJBSUxIT05HQUwJQkFOR0FMT1JFCUJBTkdBUlBFVAhCQU5UV0FMQQ1CQVNBVkFLQUxZQU5BB0JFTEdBVU0HQkVMTEFSWQtCRUxUSEFOR0FESQVCRUxVUgtCSEFEUkFWQVRISQZCSEFMS0kFQklEQVIHQklKQVBVUgZCSUxBR0kQQklOTlkgTUlMTCAoRiZWKQZCWUFER0kJQy5SLk5BR0FSCUMuUi5QQVROQQpDSEFMTEFLRVJFCkNIQU5OQUdJUkkLQ0hBTk5BUEFUTkEMQ0hJQ0tBTUFHTFVSDUNISUNLQkFMTEFQVVIIQ0hJTkNPTEkKQ0hJTlRBTUFOSQtDSElUUkFEVVJHQQpDSElUVEFQVVJBCkRBVkFOQUdFUkUIREVWRFVSR0EHREhBUldBUg1ET0REQUJBTExBUFVSBEVOREkFR0FEQUcJR0FOR0FWQVRJBUdPS0FLCkdPTklLT1BQQUwLR09XUklCSUROVVIFR1VCQkkIR1VMQkFSR0EJR1VORExVUEVUFEhBR0FSSSBCT01NQU5BIEhBTExJCEhBTElZQUxBBkhBTkdBTA1IQVJBUEFOQUhBTExJCEhBUklIQVJBBkhBU1NBTgZIQVZFUkkJSElSRUtFUlVSB0hJUklZVVIJSE9MQUxLRVJFDUhPTEVOQVJBU0lQVVIHSE9OTkFMSQhIT05OQVZBUg9IT09WSU5BSEFEQUdBTEkJSE9TQURVUkdBCUhPU0FOQUdBUgdIT1NLT1RFBkhPU1BFVAVIVUJMSQdIVUxJWUFSCEhVTU5BQkFEB0hVTkdVTkQGSFVOU1VSB0pBR0FMVVIISkFNS0FOREkHSkVWQVJHSQlLLlIuTkFHQVIHSy5SLlBFVAVLQURVUglLQUxHSEFUR0kKS0FOQUtBUFVSQQdLQVJLQUxBB0tBUlRBR0kGS0FSV0FSBUtPTEFSCEtPTExFR0FMBUtPUFBBBktPUFBBTAZLT1RUVVIGS1VEQ0hJBUtVTVRBCEtVTkRBUFVSB0tVTkRHT0wHS1VOSUdBTAdLVVNUQUdJCkxBWE1FU0hXQVILTElOR0FTQVJHVVIGTUFERFVSCU1BREhVR0lSSQhNQURJS0VSSQ1NQUhBTElOR0FQVVJBBU1BTFVSBk1BTkRZQQlNQU5HQUxPUkUFTUFOVkkITVVESUdFUkUITVVMQkFHQUwITVVOREFHT0QITVVOREFSR0kGTVlTT1JFC05BR0FNQU5HQUxBCE5BTkRBR0FECU5BTkpBTkdVRAdOQVJHVU5EB05JUFBBTkkLUEFOREFWQVBVUkEIUEFWQUdBREELUEVSSVlBUEFUTkEGUFVUVFVSB1JBSUNIVVIKUkFNQU5BR0FSQQhSQU1EVVJHQQpSQU5JQkVOTlVSBFJPTkEFU0FHQVIKU0FLTEVTSFBVUgpTQU5LRVNIV0FSDFNBTlRIRVNBUkdVUglTQVZBREFUVEkHU0FWQU5VUgVTRURBTQhTSEFIQVBVUghTSElHR0FPTgpTSElLQVJJUFVSB1NISU1PR0EIU0hPUkFQVVIJU0lEREFQVVJBB1NJTkRBR0kJU0lOREhBTlVSBFNJUkEJU0lSQUdVUFBBBVNJUlNJCVNPTVdBUlBFVAdTT1JBQkhBCFNSSU5HRVJJC1NSSU5JVkFTUFVSDVNSSVJBTkdBUEFUTkEFU1VMWUEKVC5OQVJTSVBVUghUQUxJS09URQhUQVJJS0VSRQZUSVBUVVILVElSVEhBSEFMTEkGVFVNS1VSClRVUlVWRUtFUkUFVURJUEkGWUFER0lSCFlFTEJVUkdBCVlFTExBUFVSQRWdAQpBbGxNYXJrZXRzAjg1AjU1Ajc3AzEyMgMxMDkDMTEwAzEyMAI3NQExAjIwAjcwAzEzMgI3NAMxMjMCNjkCNTgCMjcDMTE4AzEyOQMxMDYDMTUxATICOTYCNjMCNTQBNwIxMgEzAjQ0AjE3AzE0MwIxOAE2AzEzMwIxMAMxNTUCODQBNAMxNTQDMTE0AzEzOAI3NgI1MQIxOQIyOQMxMTMCNjUDMTI2AzEzOQI5NQIxNAIxMQI1MwMxMDICOTcBOAMxNTMCNTYCMTMDMTA1AzEzNQE5AzE0OQMxNTIDMTE2Ajg2AjMwAzE0MAMxMTECMzgCMTUDMTEyAzE1NgIzOQI2MQI0NgI4NwE1AjcyAzE1MAMxMjECMTYCNjQCNDgDMTM3AzEwMAI3OAMxMDMCNzMCODgCMzYDMTE3Ajg5Ajk5AjYwAjMxAjUwAzExNQIyMQI1OQI2NgMxMzYCNDcCMjICOTQCOTMCMzcCNjICNzkCNDACOTICODADMTQ0AjMyAjQzAjY3AzEzNAMxNDUCODEDMTA0AjkxAjI1AjU3AjgyAjQxAjgzAjk4AzEwOAMxMTkDMTQ2AjI2AjI0AzEwMQMxMjcDMTI1AzE0MQIzMwMxMjgDMTMwAjUyAzE0OAI0OQIyMwMxNDICNjgCNDIDMTI0AjQ1AjM0AzE0NwIyOAIzNQI3MQI5MAMxMDcDMTMxFCsDnQFnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZGQCBQ9kFgJmD2QWAgIBD2QWBAIBDw8WAh8ABUBDb21tb2RpdHkgV2lzZSBEYWlseSBSZXBvcnQgRm9yIEZFQlJVQVJZICAtLTIwMTQgQ29tbW9kaXR5IEFKV0FOZGQCAw88KwANAQAPFgYfA2ceC18hSXRlbUNvdW50Zh4HVmlzaWJsZWdkZAIJDw8WAh8ABR1GZWJydWFyeSAgICAgICAgMjIsICAgICAgMjAxNGRkGAIFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYCBQpfY3RsMDpsYW5nBQpfY3RsMDpsYW5nBRFfY3RsMDpjb250ZW50NTpndg88KwAKAQhmZMGZU3PCl5k5lv5qmdfP5irFDR8x',
#                     '__LASTFOCUS' => '',
#                     '__EVENTARGUMENT'=>'',
#                     '__EVENTTARGET'=>'',
#                     '__PREVIOUSPAGE' => '7Xjktvp1RQ0rOdOU-S7VMJ2T98YA7m1Mu4geJ8v3PC59vB19alOxWzAIhUanDeEy26Ffp7dSgazOCX1uVOSEP0nYGSc7M0LNAkFiwqAospWX3jaL0',
#                     '__EVENTVALIDATION'=>'/wEWxAMClbCf1QYC5oeVqAcCpOzOpQQCpezOpQQCpuzOpQQCp+zOpQQCoOzOpQQCoezOpQQCouzOpQQCs+zOpQQCvOzOpQQCpOyOpgQCpOyCpgQCpOyGpgQCyd2btAMCyd2vkwgCyd3DfwLJ3dfaCQLJ3euBBgLJ3f/sDgLJ3dOFCALJ3edgAqLk1fkHAqLk6aQMAqLk/YMFAqLkke4NAqLkpdUKAtHQmqUDAvTJg6QEAvz74NIJAtLQnqUDAq+xmoYNAp7wydEKAujegY8OAvTJ66QEAtyT9M4FArixhoYNAp7wtdIKAruxzoUNAq+xloYNAune9Y8OAqCxroYNAtyT7M4FArmxwoUNAqONoOUFAqONzOQFArixzoUNAqCxooYNArmxzoUNAqCxkoYNAune+Y8OAtHQgqUDAs63hpIIAr2x4oUNAs23npIIAruxroYNAq+xnoYNAs23qpIIAryxroYNAq+xroYNAqONpOUFArqxwoUNAq+x4oUNAtuTlM4FAq+xqoYNAp/w4dEKArqxnoYNAs63ypEIAqONyOQFAqON7OQFAqONtOUFAune5Y8OAqKNuOUFApji1s8PApji6s8PAqKNpOUFAruxooYNAs23mpIIAs23kpIIAue62vsLArqxmoYNAp/wudIKAs23lpIIArqxkoYNAua69vsLAtuT7M4FAvTJ06QEApji9s8PAr6xroYNAq+xwoUNArmxmoYNAtHQjqUDAtyT+M4FAofi6s8PAq+xooYNAqKNzOQFAua62vsLArqxhoYNAv374NIJAujejY8OAruxnoYNAtuT/M4FAruxloYNAua61vsLArixnoYNAqCxzoUNAunejY8OAqCxqoYNAq+xzoUNAvTJ16QEAtuT4M4FAruxqoYNAs63gpIIAr2xzoUNAua6zvsLAuje9Y8OAue6yvsLAs23hpIIAr2xkoYNAv37iNIJAtyTlM4FArmxnoYNAtyT5M4FAua60vsLAv377NIJArmxhoYNAtyT8M4FAqON6OQFArmxqoYNAofiws8PAq+xhoYNAs23rpIIApjiws8PAryxooYNAqCx4oUNArixooYNAtLQjqUDAue6zvsLAofiis8PAr6xkoYNAtyT6M4FAr6xnoYNAune/Y8OAv379NIJAofi0s8PAv37/NIJAqKNtOUFAqKNyOQFAtuT8M4FAv37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'
                    
# })
# response = http.request(request)

# p response.body
# Supplier mapping to crawlers

# supplier_name:string
# supplier_id:integer
# crawler_module:string
# mapping_method: #for a given item returns the relevant item identifier in supplier

#given item_name, item_variety and unit  return the item identifier on external api

# where to place the logic of updating the prices of suppliers using crawlers

# does it have a state?
# need to log the progess, check when last run..like an update status or delayed job?
# can call it crawl job